<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Kafa Seç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }

    body {
      background-color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    #gameCanvas {
      background-color: #333;
      border: 3px solid #fff;
      position: absolute;
    }

    .kafa {
      position: absolute;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .kafa.selected {
      transform: scale(1.2);
      border: 2px solid #ff6700;
    }
  </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const kafaImages = [];
  const totalKafalar = 3; // Seçilebilir kafaların sayısı
  const maxBackgroundKafalar = 10; // Arka planda rastgele kayacak kafa sayısı
  const backgroundKafalar = [];

  // Kafa görsellerini yükleyelim
  for (let i = 1; i <= totalKafalar; i++) {
    const img = new Image();
    img.src = `kafa${i}.png`;
    kafaImages.push(img);
  }

  // Arka plandaki kafaları oluştur
  for (let i = 0; i < maxBackgroundKafalar; i++) {
    const randomKafaIndex = Math.floor(Math.random() * totalKafalar);
    backgroundKafalar.push({
      image: kafaImages[randomKafaIndex],
      x: Math.random() * canvas.width,
      y: -50,  // Yatay konumdan önce yukarıda başlasın
      speed: Math.random() * 1 + 0.5,  // Farklı hızlarla kayacak
    });
  }

  // Kafa seçimi işlemi
  let selectedKafaIndex = -1;

  function drawBackgroundKafalar() {
    backgroundKafalar.forEach((kafa) => {
      kafa.y += kafa.speed;  // Kafanın yukarıdan aşağıya kaymasını sağla
      if (kafa.y > canvas.height) {
        kafa.y = -50;  // Ekranın dışına çıktığında tekrar yukarıya gelsin
      }
      ctx.drawImage(kafa.image, kafa.x, kafa.y, 50, 50);  // Kafayı çiz
    });
  }

  function drawKafalar() {
    // 3 seçilebilir kafa
    for (let i = 0; i < totalKafalar; i++) {
      const img = kafaImages[i];
      const x = (canvas.width / 2) - (totalKafalar * 60) / 2 + i * 60;  // 3 kafa arasındaki mesafe
      const y = canvas.height / 2 - 30;  // Yatayda ortalanmış ve biraz aşağıda
      const width = 50;
      const height = 50;

      ctx.drawImage(img, x, y, width, height);

      // Seçilen kafa olduğunda biraz büyütme efekti ekle
      if (selectedKafaIndex === i) {
        ctx.lineWidth = 2;
        ctx.strokeStyle = "#ff6700";
        ctx.strokeRect(x - 2, y - 2, width + 4, height + 4);  // Seçilen kafa etrafında kenarlık
      }
    }
  }

  function onKafaClick(e) {
    const rect = canvas.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    for (let i = 0; i < totalKafalar; i++) {
      const x = (canvas.width / 2) - (totalKafalar * 60) / 2 + i * 60;
      const y = canvas.height / 2 - 30;
      const width = 50;
      const height = 50;

      // Tıklama alanı kontrolü
      if (mouseX > x && mouseX < x + width && mouseY > y && mouseY < y + height) {
        selectedKafaIndex = i;  // Tıklanan kafa seçilir
      }
    }
  }

  canvas.addEventListener("click", onKafaClick);

  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);  // Her frame temizle
    drawBackgroundKafalar();  // Arka plandaki kafaları çiz
    drawKafalar();  // Seçilebilir kafaları çiz
    requestAnimationFrame(gameLoop);  // Sonsuz döngüde animasyonu çalıştır
  }

  gameLoop();  // Başlat

</script>

</body>
</html>
